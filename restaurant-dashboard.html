<!DOCTYPE html>
<html lang="pt-AO">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Restaurante</title>
    <link rel="stylesheet" href="restaurant-dashboard.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
   
    <div class="mobile-header">
        <div class="burger" onclick="toggleMenu()">‚ò∞</div>
        <div class="mobile-title">Dashboard</div>
    </div>
      
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="restaurant-info">
                <div class="restaurant-avatar" id="restaurantAvatar">üçΩÔ∏è</div>
                <div class="restaurant-details">
                    <h3 id="restaurantName">Restaurante</h3>
                    <p id="restaurantCategory">Categoria</p>
                </div>
            </div>
        </div>
        
        <nav class="sidebar-menu">
            <a href="#" class="menu-item active" onclick="showSection('overview')">
                <span class="menu-icon">üìä</span>
                <span>Vis√£o Geral</span>
            </a>
            <a href="#" class="menu-item" onclick="showSection('orders')">
                <span class="menu-icon">üìã</span>
                <span>Pedidos</span>
            </a>
            <a href="#" class="menu-item" onclick="showSection('menu')">
                <span class="menu-icon">üçΩÔ∏è</span>
                <span>Card√°pio</span>
            </a>
            <a href="#" class="menu-item" onclick="showSection('reports')">
                <span class="menu-icon">üí∞</span>
                <span>Relat√≥rio de Lucros</span>
            </a>
            <a href="#" class="menu-item" onclick="showSection('settings')">
                <span class="menu-icon">‚öôÔ∏è</span>
                <span>Configura√ß√µes</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <button onclick="logout()" class="btn-logout-sidebar">
                <span>üö™</span> Sair
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        
        <!-- SE√á√ÉO: VIS√ÉO GERAL -->
        <section id="overviewSection" class="content-section active">
            <h1 class="page-title">üìä Vis√£o Geral</h1>
            
            <!-- Estat√≠sticas -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-info">
                        <div class="stat-label">Pedidos Hoje</div>
                        <div class="stat-value" id="todayOrders">0</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-info">
                        <div class="stat-label">Receita Hoje</div>
                        <div class="stat-value" id="todayRevenue">Kz 0,00</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-info">
                        <div class="stat-label">Avalia√ß√£o</div>
                        <div class="stat-value" id="rating">0.0</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üçΩÔ∏è</div>
                    <div class="stat-info">
                        <div class="stat-label">Pratos no Card√°pio</div>
                        <div class="stat-value" id="menuCount">0</div>
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o de Avalia√ß√µes -->
            <div class="ratings-section">
                <div class="rating-summary-card">
                    <h3>‚≠ê Avalia√ß√£o do Restaurante</h3>
                    <div class="rating-summary">
                        <div class="rating-number" id="restaurantRatingNumber">0.0</div>
                        <div class="rating-stars" id="restaurantRatingStars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                        <div class="rating-count" id="restaurantRatingCount">0 avalia√ß√µes</div>
                    </div>
                </div>
            </div>

            <!-- Avalia√ß√µes dos Clientes -->
            <div class="feedbacks-section">
                <h3>üí¨ Avalia√ß√µes dos Clientes</h3>
                <div id="feedbacksList" class="feedbacks-list">
                    <!-- As avalia√ß√µes ser√£o carregadas aqui via JavaScript -->
                </div>
            </div>

            <!-- Pedidos Recentes -->
            <div class="recent-orders-section">
                <h3>üìã Pedidos Recentes</h3>
                <div id="recentOrdersList"></div>
            </div>
        </section>

        <!-- SE√á√ÉO: PEDIDOS -->
        <section id="ordersSection" class="content-section">
            <h1 class="page-title">üìã Gerenciar Pedidos</h1>
            
            <!-- Filtros -->
            <div class="orders-filters">
                <button class="filter-btn active" data-filter="all" onclick="filterRestaurantOrders('all')">Todos</button>
                <button class="filter-btn" data-filter="pending" onclick="filterRestaurantOrders('pending')">üïê Pendente</button>
                <button class="filter-btn" data-filter="preparing" onclick="filterRestaurantOrders('preparing')">üë®‚Äçüç≥ Preparando</button>
                <button class="filter-btn" data-filter="delivering" onclick="filterRestaurantOrders('delivering')">üöö Entregando</button>
                <button class="filter-btn" data-filter="completed" onclick="filterRestaurantOrders('completed')">‚úÖ Conclu√≠do</button>
                <button class="filter-btn" data-filter="cancelled" onclick="filterRestaurantOrders('cancelled')">‚ùå Cancelado</button>
            </div>

            <!-- Lista de Pedidos -->
            <div id="restaurantOrdersList" class="orders-list">
                <!-- Pedidos ser√£o carregados aqui -->
            </div>
        </section>

        <!-- SE√á√ÉO: CARD√ÅPIO -->
        <section id="menuSection" class="content-section">
            <div class="section-header">
                <h1 class="page-title">üçΩÔ∏è Gerenciar Card√°pio</h1>
                <button onclick="showAddMenuItemModal()" class="btn-add">
                    ‚ûï Adicionar Prato
                </button>
            </div>
            
            <div id="restaurantMenuGrid" class="menu-grid">
                <!-- Pratos ser√£o carregados aqui -->
            </div>
        </section>

        <!-- SE√á√ÉO: RELAT√ìRIO DE LUCROS -->
        <section id="reportsSection" class="content-section">
            <div class="section-header">
                <h1 class="page-title">üí∞ Relat√≥rio de Lucros</h1>
                <button onclick="loadProfitReport()" class="btn-add">
                    üîÑ Atualizar
                </button>
            </div>
            
            <div id="profitReportContent">
                <!-- Conte√∫do ser√° gerado dinamicamente -->
                <div class="empty-message" style="text-align: center; padding: 60px 20px;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">üìä</div>
                    <h3>Carregando relat√≥rio...</h3>
                </div>
            </div>
        </section>

        <!-- SE√á√ÉO: CONFIGURA√á√ïES -->
        <section id="settingsSection" class="content-section">
            <h1 class="page-title">‚öôÔ∏è Configura√ß√µes do Restaurante</h1>
            
            <form onsubmit="saveSettings(event)" class="settings-form">
                <div class="form-group">
                    <label>Nome do Restaurante</label>
                    <input type="text" id="settingsName" required>
                </div>

                <div class="form-group">
                    <label>Imagem do Restaurante *</label>
                    <input type="file" id="settingsImage" accept="image/*" onchange="previewRestaurantImage(event)">
                    <small style="color: #666; font-size: 0.85rem;">Formatos aceitos: JPG, PNG (m√°x. 5MB)</small>
                    <div id="restaurantImagePreview" style="margin-top: 10px;"></div>
                </div>

                <div class="form-group">
                    <label>√çcone (Emoji - opcional)</label>
                    <input type="text" id="settingsIcon">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="settingsCategory" required>
                            <option value="Restaurante">Restaurante</option>
                            <option value="Lanchonete">Lanchonete</option>
                            <option value="Pizzaria">Pizzaria</option>
                            <option value="Hamburgueria">Hamburgueria</option>
                            <option value="Sushi">Sushi</option>
                            <option value="Pastelaria">Pastelaria</option>
                            <option value="Cafeteria">Cafeteria</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tipo de Cozinha</label>
                        <input type="text" id="settingsCuisine" placeholder="Ex: Italiana, Angolana, Brasileira">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Tempo M√≠nimo (min)</label>
                        <input type="number" id="settingsMinTime" min="10" max="120" required>
                    </div>

                    <div class="form-group">
                        <label>Tempo M√°ximo (min)</label>
                        <input type="number" id="settingsMaxTime" min="10" max="120" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="settingsPhone" placeholder="+244 900 000 000">
                </div>

                <div class="form-group">
                    <label>Endere√ßo</label>
                    <textarea id="settingsAddress" rows="3" placeholder="Endere√ßo completo do restaurante"></textarea>
                </div>

                <button type="submit" class="btn-save">
                    üíæ Salvar Configura√ß√µes
                </button>
            </form>
        </section>

    </main>

    <!-- Modal: Adicionar Prato -->
    <div id="addMenuModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Adicionar Novo Prato</h2>
                <button class="close-btn" onclick="closeAddMenuModal()">&times;</button>
            </div>
            <form id="addMenuForm" onsubmit="addMenuItem(event)" class="modal-body">
                <div class="form-group">
                    <label>Nome do Prato</label>
                    <input type="text" id="dishName" required>
                </div>

                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="dishDescription" rows="3" required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Pre√ßo (Kz)</label>
                        <input type="number" id="dishPrice" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="dishCategory" required>
                            <option value="Entrada">Entrada</option>
                            <option value="Prato Principal">Prato Principal</option>
                            <option value="Sobremesa">Sobremesa</option>
                            <option value="Bebida">Bebida</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Imagem do Prato *</label>
                    <input type="file" id="dishImage" accept="image/*" onchange="previewDishImage(event)" required>
                    <small style="color: #666; font-size: 0.85rem;">Formatos aceitos: JPG, PNG (m√°x. 5MB)</small>
                    <div id="dishImagePreview" style="margin-top: 10px;"></div>
                </div>

                <div class="form-group">
                    <label>√çcone (Emoji - opcional)</label>
                    <input type="text" id="dishIcon" placeholder="üçï">
                </div>

                <button type="submit" class="btn-save">
                    ‚ûï Adicionar Prato
                </button>
            </form>
        </div>
    </div>

    <audio id="newOrderSound">
        <source src="sounds/new-order.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Scripts -->
    <script src="api.js"></script>
    <script src="restaurant-dashboard.js"></script>
</body>
</html>